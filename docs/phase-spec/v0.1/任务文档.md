# 考研学习助手 - MVP 任务拆分文档

**版本**: v1.0
**创建日期**: 2025-11-24
**项目周期**: 预计4-6周
**开发团队**: 1-2人

---

## 任务概览

根据《需求文档-mvp.md》和《架构设计文档-mvp.md》，将MVP项目拆分为10个核心任务块。每个任务块约2-5天工作量，可并行开发。

---

## 任务1：项目基础搭建与架构初始化

**任务类型**: 基础建设
**预估工时**: 3-4天
**优先级**: P0（最高）

### 任务描述
搭建Electron + React + TypeScript项目基础架构，包括目录结构、构建配置、开发环境配置。

### 具体任务
- [ ] 创建Electron项目结构
- [ ] 配置React + TypeScript + Vite
- [ ] 配置Redux Toolkit状态管理
- [ ] 配置Ant Design UI组件库
- [ ] 配置KaTeX数学公式渲染
- [ ] 配置markdown-it
- [ ] 配置Electron Builder打包
- [ ] 创建项目目录结构（主进程/渲染进程/共享模块）
- [ ] 配置ESLint/Prettier代码规范
- [ ] 基础页面路由配置

### 交付物
- 可运行的开发环境
- 项目基础结构
- 基础页面框架（总览页、详情页、设置页）

### 依赖关系
- 无前置依赖

---

## 任务2：数据库设计与实现

**任务类型**: 基础设施
**预估工时**: 2-3天
**优先级**: P0（最高）

### 任务描述
实现SQLite数据库的初始化、模型定义和基础CRUD操作。

### 具体任务
- [ ] 安装配置better-sqlite3
- [ ] 创建数据库初始化脚本
- [ ] 实现卡片表（cards）结构
- [ ] 实现设置表（settings）结构
- [ ] 实现数据库连接管理
- [ ] 实现ID生成器
- [ ] 创建数据库操作基础类
- [ ] 实现卡片基础CRUD（Create/Read/Update/Delete）
- [ ] 实现索引优化
- [ ] 数据库迁移脚本

### 交付物
- SQLite数据库文件
- 数据库操作服务类
- 数据模型类型定义

### 依赖关系
- 任务1完成后开始

---

## 任务3：IPC通信层实现

**任务类型**: 基础设施
**预估工时**: 2-3天
**优先级**: P0（最高）

### 任务描述
实现主进程与渲染进程之间的IPC通信机制。

### 具体任务
- [ ] 设计IPC事件常量定义
- [ ] 实现预加载脚本（preload.ts）
- [ ] 实现主进程IPC服务器（cardHandler、aiHandler、ocrHandler等）
- [ ] 实现渲染进程IPC客户端Hook（useIpc）
- [ ] 实现IPC调用封装（卡片操作）
- [ ] 实现IPC调用封装（AI服务调用）
- [ ] 实现IPC调用封装（OCR服务调用）
- [ ] 实现IPC错误处理机制
- [ ] IPC通信测试用例

### 交付物
- IPC通信基础设施
- IPC调用API封装
- 事件常量定义

### 依赖关系
- 任务1完成后开始

---

## 任务4：AI服务调用核心

**任务类型**: 核心功能
**预估工时**: 3-4天
**优先级**: P0（最高）

### 任务描述
实现AI服务调用，包括主问答AI、流式输出处理。

### 具体任务
- [ ] 设计AI服务接口（OpenAI兼容）
- [ ] 实现主问答AI服务封装
- [ ] 实现流式输出处理（Server-Sent Events）
- [ ] 实现markdown渲染（支持LaTeX）
- [ ] 实现对话历史管理
- [ ] 实现AI提示词配置管理
- [ ] 实现AI服务错误重试机制
- [ ] 对话上下文管理
- [ ] AI服务测试用例

### 交付物
- AI服务调用封装
- 流式输出处理
- 对话管理系统

### 依赖关系
- 任务3完成后开始

---

## 任务5：OCR图片识别功能

**任务类型**: 核心功能
**预估工时**: 2-3天
**优先级**: P1

### 任务描述
实现图片上传、OCR识别、文本编辑功能。

### 具体任务
- [ ] 设计OCR服务接口（GLM-4V）
- [ ] 实现图片上传组件（拖拽/粘贴）
- [ ] 实现图片压缩与预处理
- [ ] 实现OCR服务调用
- [ ] 实现OCR结果展示
- [ ] 实现OCR文本编辑功能
- [ ] 实现"重新发送"功能
- [ ] OCR识别优化（准确率）
- [ ] OCR测试用例

### 交付物
- OCR服务调用封装
- 图片上传处理
- 文本编辑界面

### 依赖关系
- 任务3完成后开始

---

## 任务6：UI布局与基础组件

**任务类型**: UI开发
**预估工期**: 3-4天
**优先级**: P1

### 任务描述
实现三栏式布局和基础UI组件。

### 具体任务
- [ ] 实现主布局组件（MainLayout）
- [ ] 实现左栏导航面板（LeftPanel）
- [ ] 实现中栏卡片列表（MiddlePanel）
- [ ] 实现右栏详情面板（RightPanel）
- [ ] 实现左栏展开/折叠功能
- [ ] 实现基础UI组件（按钮、输入框、模态框）
- [ ] 实现Toast通知组件
- [ ] 实现主题配置（浅色/深色）
- [ ] 实现响应式布局适配
- [ ] UI组件测试

### 交付物
- 完整的UI布局
- 基础组件库
- 主题系统

### 依赖关系
- 任务1完成后开始

---

## 任务7：HTML助手AI与信息AI

**任务类型**: 核心功能
**预估工时**: 3天
**优先级**: P1

### 任务描述
实现HTML内容结构化和元数据提取。

### 具体任务
- [ ] 实现HTML助手AI服务调用
- [ ] 实现信息AI服务调用
- [ ] 实现标签页切换（原始输出/格式化输出）
- [ ] 实现阅读位置记忆
- [ ] 实现自动生成HTML配置
- [ ] 实现自动跳转配置
- [ ] 实现任务状态指示器
- [ ] HTML内容渲染优化
- [ ] 元数据提取优化

### 交付物
- HTML助手功能
- 信息AI元数据提取
- 标签页管理系统

### 依赖关系
- 任务4完成后开始

---

## 任务8：卡片CRUD与管理

**任务类型**: 核心功能
**预估工时**: 3-4天
**优先级**: P0（最高）

### 任务描述
实现卡片的完整生命周期管理。

### 具体任务
- [ ] 实现卡片创建面板（滑入动画）
- [ ] 实现卡片保存功能
- [ ] 实现卡片列表展示
- [ ] 实现卡片详情查看
- [ ] 实现卡片编辑功能
- [ ] 实现卡片删除功能
- [ ] 实现目录树组件
- [ ] 实现标签管理系统
- [ ] 实现卡片搜索功能
- [ ] 实现卡片排序功能
- [ ] 实现批量操作（多选、移动、删除）

### 交付物
- 卡片管理系统
- 创建面板
- 列表与详情页

### 依赖关系
- 任务2、3完成后开始

---

## 任务9：筛选、搜索与排序

**任务类型**: 功能完善
**预估工时**: 2-3天
**优先级**: P2

### 任务描述
实现卡片的筛选、搜索和排序功能。

### 具体任务
- [ ] 实现按目录筛选
- [ ] 实现按标签筛选
- [ ] 实现按创建时间筛选
- [ ] 实现组合筛选（多条件）
- [ ] 实现搜索功能
- [ ] 实现防抖搜索
- [ ] 实现排序（时间/标签/目录）
- [ ] 实现虚拟列表（大量数据）
- [ ] 实现hover预览卡片概览
- [ ] 实现筛选状态记忆

### 交付物
- 筛选搜索系统
- 排序功能
- 性能优化

### 依赖关系
- 任务8完成后开始

---

## 任务10：设置与配置管理

**任务类型**: 功能完善
**预估工时**: 3-4天
**优先级**: P2

### 任务描述
实现用户配置管理和系统设置。

### 具体任务
- [ ] 实现设置页面UI
- [ ] 实现AI提示词配置（主问答AI）
- [ ] 实现HTML助手提示词配置
- [ ] 实现信息AI提示词配置
- [ ] 实现自动生成HTML开关
- [ ] 实现自动跳转开关
- [ ] 实现阅读位置记忆开关
- [ ] 实现界面偏好配置
- [ ] 实现配置导入导出
- [ ] 实现配置重置功能
- [ ] 实现多PC同步配置（预留）

### 交付物
- 完整的设置系统
- 配置管理功能
- 用户偏好系统

### 依赖关系
- 任务1完成后开始，可并行开发

---

## 任务11：云同步服务（预留）

**任务类型**: 扩展功能
**预估工时**: 4-5天
**优先级**: P3（低）

### 任务描述
实现可选的云盘同步功能（支持OneDrive、坚果云等）。

### 具体任务
- [ ] 设计同步服务架构
- [ ] 实现文件系统监控
- [ ] 实现数据库文件同步
- [ ] 实现冲突检测与处理
- [ ] 实现自动备份机制
- [ ] 实现同步状态管理
- [ ] 实现手动同步触发
- [ ] 实现数据迁移工具

### 交付物
- 云同步服务
- 冲突处理机制
- 备份恢复系统

### 依赖关系
- 任务2完成后开始

---

## 任务12：测试、优化与打包

**任务类型**: 质量保障
**预估工时**: 3-5天
**优先级**: P1

### 任务描述
进行全面测试、性能优化和打包发布。

### 具体任务
- [ ] 编写单元测试
- [ ] 编写集成测试
- [ ] 编写E2E测试
- [ ] 性能优化（启动时间<2秒）
- [ ] 内存优化（Electron应用）
- [ ] 错误处理完善
- [ ] 打包配置优化
- [ ] Windows/macOS/Linux兼容性测试
- [ ] 安装包制作
- [ ] 用户手册编写

### 交付物
- 完整测试报告
- 性能优化报告
- 可执行安装包
- 使用文档

### 依赖关系
- 所有核心任务完成后开始

---

## 开发优先级与里程碑

### Phase 1 - 核心功能（任务1-4）
**目标**: 跑通基础架构和AI对话
**预计时间**: 10-14天
- [ ] 任务1：项目基础搭建
- [ ] 任务2：数据库设计
- [ ] 任务3：IPC通信层
- [ ] 任务4：AI服务调用

### Phase 2 - 交互功能（任务5-8）
**目标**: 实现用户操作与卡片管理
**预计时间**: 10-14天
- [ ] 任务5：OCR功能
- [ ] 任务6：UI布局
- [ ] 任务7：HTML助手与信息AI
- [ ] 任务8：卡片CRUD

### Phase 3 - 完善功能（任务9-12）
**目标**: 完整功能与优化
**预计时间**: 10-14天
- [ ] 任务9：筛选搜索
- [ ] 任务10：设置管理
- [ ] 任务11：云同步（可选）
- [ ] 任务12：测试与优化

---

## 技术风险与应对

### 高风险项
1. **AI服务稳定性**
   - 风险：外部API不稳定
   - 应对：实现重试机制、离线模式

2. **Electron性能问题**
   - 风险：内存占用过高
   - 应对：性能优化、内存监控

3. **OCR准确率**
   - 风险：识别准确率不满足需求
   - 应对：支持文本编辑、多种OCR服务

### 中风险项
1. **跨平台兼容性**
   - 风险：不同操作系统兼容性
   - 应对：充分测试、平台特性适配

2. **数据库性能**
   - 风险：大量卡片数据查询慢
   - 应对：索引优化、分页查询

---

## 质量标准

### 功能要求
- 所有P0、P1任务必须完成
- 核心流程完整可运行
- AI问答-卡片创建-卡片查看闭环打通

### 性能要求
- 应用启动时间 < 2秒
- AI响应时间 < 10秒
- 卡片列表加载 < 1秒

### 兼容性要求
- Windows 10/11
- macOS 10.15+
- Ubuntu 20.04+

---

## 交付标准

### MVP版本必须包含
1. ✅ AI问答功能（主问答AI）
2. ✅ OCR图片识别
3. ✅ 卡片创建与管理
4. ✅ 卡片列表与详情查看
5. ✅ 基础设置功能
6. ✅ HTML结构化输出
7. ✅ 标签与目录管理

### MVP版本可选包含
1. ⏳ 云同步功能（如果时间充裕）
2. ⏳ 高级搜索功能（如果时间充裕）

---

**文档版本**: v1.0
**最后更新**: 2025-11-24
**状态**: 待开发团队评审